@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;
    --bg: #fafafa;
    --bg-soft: rgba(255, 255, 255, 0.85);
    --text: #0f172a;
    --text-dim: rgba(15, 23, 42, 0.7);
    --ring: rgba(15, 23, 42, 0.25);
    --divider: #e5e7eb;
    --brand: #fc9c6c;
    --brand-hover: #e57b53;
    --ok: #34d399;
    --warn: #f59e0b;
    --err: #ef4444;
    --card-bg: rgba(0, 0, 0, 0.03);
    --card-bg-hover: rgba(0, 0, 0, 0.06);
    --popover: rgba(255, 255, 255, 0.96);
  }

  .dark {
    color-scheme: dark;
    --bg: #0d0d0d;
    --bg-soft: rgba(17, 17, 17, 0.8);
    --text: #ffffff;
    --text-dim: rgba(255, 255, 255, 0.68);
    --ring: rgba(255, 255, 255, 0.12);
    --divider: #232323;
    --brand: #fc9c6c;
    --brand-hover: #e57b53;
    --card-bg: rgba(255, 255, 255, 0.05);
    --card-bg-hover: rgba(255, 255, 255, 0.08);
    --popover: rgba(13, 13, 13, 0.85);
  }

  html {
    height: 100%;
    /* Odstranjen globalni smooth scroll za boljši performance v Firefoxu */
    /* scroll-behavior: smooth; */
    
    /* Chrome/Safari: Antialiased (malo stanjša in zgladi) */
    -webkit-font-smoothing: antialiased;
    
    /* Firefox: Auto (pusti naravno debelino - to popravi "pretenek" font) */
    -moz-osx-font-smoothing: auto;
  }

  body {
    background-color: var(--bg);
    color: var(--text);
    height: 100%;
    
    /* Optimizacija za čitljivost */
    text-rendering: optimizeLegibility;
    
    transition: background-color 0.3s ease, color 0.3s ease;
  }
}

@layer utilities {
  /* SKRIVANJE SCROLLBARJA (Za tvojo navigacijo) */
  .no-scrollbar::-webkit-scrollbar {
      display: none;
  }
  .no-scrollbar {
      -ms-overflow-style: none;  /* IE and Edge */
      scrollbar-width: none;  /* Firefox - to skrije tisti debel gumb */
  }

  /* Fallback za starejše verzije */
  .scrollbar-hide::-webkit-scrollbar {
      display: none;
  }
  .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
  }

  /* Ostali utility razredi */
  .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
  
  .line-clamp-2 { display: -webkit-box; -webkit-box-orient: vertical; overflow: hidden; -webkit-line-clamp: 2; }
  .line-clamp-3 { display: -webkit-box; -webkit-box-orient: vertical; overflow: hidden; -webkit-line-clamp: 3; }
  .line-clamp-4 { display: -webkit-box; -webkit-box-orient: vertical; overflow: hidden; -webkit-line-clamp: 4; }

  .cv-auto { content-visibility: auto; contain-intrinsic-size: 256px 320px; }
  
  .surface { background: var(--card-bg); border-radius: 16px; box-shadow: 0 8px 20px rgba(0,0,0,0.05); backdrop-filter: saturate(120%) blur(6px); border: 1px solid transparent; }
  .dark .surface { box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
  .surface:hover { background: var(--card-bg-hover); }
  
  .popover-panel { background: var(--popover); border-radius: 16px; box-shadow: 0 18px 40px rgba(0,0,0,0.25); backdrop-filter: blur(12px) saturate(120%); border: 1px solid var(--divider); }
  
  .hr-soft { border-top: 1px solid var(--divider); }
}

/* GLOBALNI STILI */
a { text-decoration: none; }
.prose a, .preview-typo a { text-decoration: underline; text-underline-offset: 2px; }

:where(button, a, [tabindex]:not([tabindex="-1"])):focus-visible { outline: none; box-shadow: 0 0 0 2px var(--bg), 0 0 0 4px var(--brand); border-radius: 4px; }
.btn-press:active { transform: translateY(1px) scale(0.98); }

/* ANIMACIJE */
.fade-in { animation: fadeIn 0.6s ease-in-out both; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
.animate-fadeInUp { animation: fadeInUp 0.3s ease-out forwards; }

@keyframes zenPulse { 0%, 100% { transform: scale(1); opacity: 0.7; } 50% { transform: scale(1.2); opacity: 1; } }
.animate-zenPulse { animation: zenPulse 1.6s ease-in-out infinite; }

@keyframes iconIn { from { opacity: 0; transform: scale(0.5) rotate(-90deg); } to { opacity: 1; transform: scale(1) rotate(0); } }
.animate-iconIn { animation: iconIn 0.5s ease-out; }

@media (prefers-reduced-motion: reduce) { 
  * { 
    animation-duration: 0.01ms !important; 
    animation-iteration-count: 1 !important; 
    transition-duration: 0.01ms !important; 
    scroll-behavior: auto !important; 
  } 
}

@media (min-width: 640px) {
  .sm\:line-clamp-2 { display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:2; overflow:hidden; }
  .sm\:line-clamp-3 { display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:3; overflow:hidden; }
  .sm\:line-clamp-4 { display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:4; overflow:hidden; }
}

/* EYE ZOOM EFFECT */
.eye-zoom { 
  transform: translate(var(--tw-translate-x,0), var(--tw-translate-y,-2px)) rotate(var(--tw-rotate,0)) skewX(var(--tw-skew-x,0)) skewY(var(--tw-skew-y,0)) scaleX(var(--tw-scale-x, 0.95)) scaleY(var(--tw-scale-y, 0.95)); 
  transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1), opacity 200ms ease; 
  will-change: transform, opacity; 
  opacity: 0; 
}
@media (min-width: 768px) { .group:hover .eye-zoom { --tw-translate-y: 0; --tw-scale-x: 1.12; --tw-scale-y: 1.12; opacity: 1; } }
@media (min-width: 768px) and (hover: hover) { .group:hover .eye-zoom:hover { --tw-translate-y: 0; --tw-scale-x: 1.22; --tw-scale-y: 1.22; opacity: 1; } }
@media (max-width: 767.98px) { .eye-zoom { --tw-translate-y: 0; --tw-scale-x: 1; --tw-scale-y: 1; opacity: 1; } }
